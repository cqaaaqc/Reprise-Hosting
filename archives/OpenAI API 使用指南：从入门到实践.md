# OpenAI API ä½¿ç”¨æŒ‡å—ï¼šä»å…¥é—¨åˆ°å®è·µ

æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»å¦‚ä½•è·å– OpenAI API Keyã€æŸ¥è¯¢å’Œå……å€¼é¢åº¦ï¼Œå¹¶é€šè¿‡ Python è¿›è¡Œ API æµ‹è¯•ã€‚æ— è®ºä½ æ˜¯æ–°æ‰‹è¿˜æ˜¯æœ‰ç»éªŒçš„å¼€å‘è€…ï¼Œéƒ½èƒ½å¿«é€Ÿä¸Šæ‰‹ OpenAI çš„å¼ºå¤§åŠŸèƒ½ã€‚

## ä¸€ã€è·å– OpenAI API Key

### 1.1 æ³¨å†Œ OpenAI è´¦å·
å¦‚æœä½ ä¹‹å‰ä½¿ç”¨è¿‡ ChatGPTï¼Œé‚£ä¹ˆä½ çš„ ChatGPT è´¦å·å°±æ˜¯ OpenAI è´¦å·ï¼Œç›´æ¥ç™»å½•å³å¯ã€‚å¦‚æœæ²¡æœ‰è´¦å·ï¼Œå¯ä»¥å‰å¾€ OpenAI å®˜ç½‘è¿›è¡Œæ³¨å†Œã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºå›½å†…ç½‘ç»œé™åˆ¶ï¼Œæ³¨å†Œè¿‡ç¨‹å¯èƒ½è¾ƒä¸ºå¤æ‚ã€‚ä½ å¯ä»¥å‚è€ƒç½‘ä¸Šçš„æ•™ç¨‹ï¼Œæˆ–ç›´æ¥è´­ä¹°ç°æˆçš„è´¦å·ã€‚

### 1.2 ç”Ÿæˆ API Key
ç™»å½• OpenAI åï¼Œå°†é¼ æ ‡ç§»åŠ¨åˆ°é¡µé¢å·¦ä¾§ï¼Œä¼šå¼¹å‡ºä¾§è¾¹æ ã€‚ç‚¹å‡»â€œAPI Keysâ€è¿›å…¥ç®¡ç†é¡µé¢ã€‚

![è·å– API Key](https://bbtdd.com/img/2742027202176066.webp)

åœ¨ API Keys é¡µé¢ï¼Œç‚¹å‡»â€œCreate new secret keyâ€åˆ›å»ºæ–°çš„ API Keyã€‚åˆ›å»ºåï¼Œç³»ç»Ÿä¼šå¼¹å‡ºä¸€ä¸ªå¯¹è¯æ¡†ï¼Œæ˜¾ç¤ºç”Ÿæˆçš„ Keyã€‚åŠ¡å¿…ç«‹å³ä¿å­˜ï¼Œå› ä¸ºå…³é—­å¯¹è¯æ¡†åå°†æ— æ³•å†æ¬¡æŸ¥çœ‹æ­¤ Keyã€‚

## äºŒã€æŸ¥è¯¢ä¸å……å€¼ API é¢åº¦

### 2.1 æŸ¥è¯¢ä½¿ç”¨é¢åº¦
åœ¨ä¾§è¾¹æ ä¸­ç‚¹å‡»â€œUsageâ€ï¼Œè¿›å…¥ä½¿ç”¨é¡µé¢ã€‚é¡µé¢å·¦ä¾§æ˜¾ç¤ºæ¯æ—¥èŠ±è´¹ï¼Œå³ä¾§æ˜¾ç¤ºå½“å‰é¢åº¦ã€‚

![æŸ¥è¯¢é¢åº¦](https://bbtdd.com/img/884768083042.webp)

åœ¨ Credit Grants åŒºåŸŸï¼Œé¢åº¦åˆ†ä¸ºä¸‰ç§çŠ¶æ€ï¼šç°è‰²ï¼ˆæœªä½¿ç”¨ï¼‰ã€ç»¿è‰²ï¼ˆå·²ä½¿ç”¨ï¼‰ã€çº¢è‰²ï¼ˆå·²è¿‡æœŸï¼‰ã€‚åªæœ‰æœªä½¿ç”¨çš„é¢åº¦ï¼ˆç°è‰²çŠ¶æ€ï¼‰æ‰èƒ½æˆåŠŸè°ƒç”¨ APIã€‚

### 2.2 å……å€¼é¢åº¦
åœ¨ä¾§è¾¹æ ä¸­ç‚¹å‡»â€œSettingâ€ä¸‹çš„â€œBillingâ€ï¼Œè¿›å…¥è´¦å•é¡µé¢ã€‚åœ¨æ­¤é¡µé¢ä¸­ï¼Œä½ å¯ä»¥ç®¡ç†æ”¯ä»˜æ–¹å¼å¹¶è¿›è¡Œå……å€¼ã€‚

ç”±äºå›½å†…ç½‘ç»œé™åˆ¶ï¼Œéƒ¨åˆ†å›½å†… Visa å¡å¯èƒ½æ— æ³•ä½¿ç”¨ã€‚å»ºè®®ä½¿ç”¨å›½é™…ä¿¡ç”¨å¡æˆ–è™šæ‹Ÿå¡ã€‚ğŸ‘‰ [WildCard | ä¸€åˆ†é’Ÿæ³¨å†Œï¼Œè½»æ¾è®¢é˜…æµ·å¤–çº¿ä¸ŠæœåŠ¡](https://bbtdd.com/WildCard)

æ·»åŠ æ”¯ä»˜æ–¹å¼åï¼Œè¿”å› Overview é¡µé¢ï¼Œç‚¹å‡»â€œAdd to credit balanceâ€è¿›è¡Œå……å€¼ã€‚å……å€¼å®Œæˆåï¼Œå¯åœ¨ Usage é¡µé¢æŸ¥çœ‹é¢åº¦å˜åŒ–ã€‚

## ä¸‰ã€Python ç¯å¢ƒä¸‹ä½¿ç”¨ OpenAI API

### 3.1 é…ç½® Python ç¯å¢ƒ
ç¡®ä¿ä½ çš„ Python ç‰ˆæœ¬ä¸º 3.7.1 æˆ–ä»¥ä¸Šã€‚å»ºè®®ä½¿ç”¨ Anaconda åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼Œä»¥ä¾¿ç®¡ç†ä¾èµ–ã€‚

### 3.2 å®‰è£… OpenAI åº“
é€šè¿‡ pip å®‰è£… OpenAI åº“ï¼š
bash
pip install openai


### 3.3 è®¾ç½® API Key
OpenAI é»˜è®¤ä¼šä»ç¯å¢ƒå˜é‡ä¸­è¯»å–â€œOPENAI_API_KEYâ€ã€‚ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼è®¾ç½® API Keyï¼š

- **å…¨å±€è®¾ç½®**ï¼šåœ¨ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­æ·»åŠ  OPENAI_API_KEYã€‚
- **é¡¹ç›®è®¾ç½®**ï¼šåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º `.env` æ–‡ä»¶ï¼Œå¹¶è¾“å…¥ `OPENAI_API_KEY=your_api_key`ã€‚

python
from openai import OpenAI
client = OpenAI()


### 3.4 å‘é€è¯·æ±‚æµ‹è¯•
ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ GPT-3.5 èŠå¤©è¯·æ±‚ç¤ºä¾‹ï¼š

python
import os
import dotenv
from openai import OpenAI

dotenv.load_dotenv()

client = OpenAI(
    api_key=os.environ.get("OPENAI_API_KEY"),
)

response = client.chat.completions.create(
    model="gpt-3.5-turbo",
    messages=[
        {"role": "system", "content": "You are a poetic assistant, skilled in explaining complex programming concepts with creative flair."},
        {"role": "user", "content": "Compose a poem that explains the concept of recursion in programming."}
    ]
)

print(response.choices[0].message.content)


å‘é€è¯·æ±‚åï¼Œä½ å¯ä»¥åœ¨ Usage é¡µé¢æŸ¥çœ‹æ­¤æ¬¡è¯·æ±‚çš„èŠ±è´¹åŠ token æ•°é‡ï¼ˆå¯èƒ½ä¼šæœ‰å»¶è¿Ÿï¼‰ã€‚

## å››ã€API åŠŸèƒ½ä»‹ç»ï¼ˆä»¥ Python ä¸ºä¾‹ï¼‰

### 4.1 æ–‡æœ¬ç”Ÿæˆ
OpenAI çš„æ–‡æœ¬ç”ŸæˆåŠŸèƒ½æ”¯æŒå¤šç§æ¨¡å‹ï¼Œå¦‚ GPT-3.5 å’Œ GPT-4ã€‚ä»¥ä¸‹æ˜¯ç”Ÿæˆå¯¹è¯çš„ç¤ºä¾‹ï¼š

python
response = client.chat.completions.create(
    model="gpt-3.5-turbo",
    messages=[
        {"role": "system", "content": "You are a helpful assistant."},
        {"role": "user", "content": "Who won the world series in 2020?"},
        {"role": "assistant", "content": "The Los Angeles Dodgers won the World Series in 2020."},
        {"role": "user", "content": "Where was it played?"}
    ]
)


### 4.2 å›¾åƒç†è§£ï¼ˆGPT-4 Visionï¼‰
GPT-4 Vision ç‰ˆæœ¬å¯ä»¥ç†è§£å›¾åƒå†…å®¹ã€‚ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ä¼ å…¥å›¾åƒ URLï¼š

python
response = client.chat.completions.create(
    model="gpt-4-vision-preview",
    messages=[
        {"role": "user", "content": [
            {"type": "text", "text": "Describe this image."},
            {"type": "image_url", "image_url": ""}
        ]}
    ]
)


### 4.3 å›¾åƒç”Ÿæˆ
OpenAI çš„å›¾åƒç”ŸæˆåŠŸèƒ½å¯ä»¥æ ¹æ®æ–‡æœ¬æè¿°ç”Ÿæˆå›¾åƒã€‚ä»¥ä¸‹æ˜¯ç¤ºä¾‹ï¼š

python
response = client.images.generate(
    model="dall-e-3",
    prompt="A futuristic cityscape at sunset",
    n=1,
    size="1024x1024"
)

image_url = response.data[0].url


é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œä½ å¯ä»¥å¿«é€Ÿä¸Šæ‰‹ OpenAI APIï¼Œå¹¶å°†å…¶åº”ç”¨äºå„ç§åœºæ™¯ï¼Œå¦‚æ–‡æœ¬ç”Ÿæˆã€å›¾åƒç†è§£ä¸ç”Ÿæˆç­‰ã€‚